(function(t){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},o=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"104b":function(t,e,r){"use strict";r("3e8d")},"16ad":function(t,e,r){},2309:function(t,e,r){},2823:function(t,e,r){},"3d17":function(t,e,r){"use strict";r("dc70")},"3e8d":function(t,e,r){},"3fd3":function(t,e,r){"use strict";r("939c")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function a(t,e,r,a,o,i){var s=Object(n["y"])("router-view");return Object(n["r"])(),Object(n["f"])(s)}r("d3b7");var o="http://84.252.140.54:3000",i={beforeCreate:function(){var t=this,e=localStorage.getItem("token");e?(this.axios.defaults.headers.common["Authorization"]=e,this.axios({url:o+"/auth",method:"GET"}).then((function(e){t.$store.commit("auth_success",{user:e.data.user})})).finally((function(){t.$store.commit("setAuthComp")}))):this.$store.commit("setAuthComp"),this.$store.dispatch("getTracks")}};r("ad82");i.render=a;var s=i,c=r("6c02"),u={class:"main wrapper"};function l(t,e,r,a,o,i){var s=Object(n["y"])("header-comp"),c=Object(n["y"])("player-comp"),l=Object(n["y"])("audio-list-comp"),d=Object(n["y"])("sidebar-comp");return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["i"])(s),Object(n["i"])(c),Object(n["i"])("div",u,[Object(n["i"])(l),Object(n["i"])(d)])],64)}r("b0c0");var d={class:"header"},f=Object(n["i"])("img",{class:"header-logo",src:"logo.svg",alt:"logo"},null,-1),p={key:0,class:"header-wrap-buttons"},m={class:"header-buttons"},b=Object(n["h"])("Войти"),h={class:"header-buttons"},O=Object(n["h"])("Регистрация"),j={key:1,class:"header-wrap-buttons"},v={class:"header-who-you"},y=Object(n["h"])("Вы вошли как "),g={class:"header-nickname"};function w(t,e,r,a,o,i){var s=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("div",d,[f,t.authCompleted?(Object(n["r"])(),Object(n["f"])(n["a"],{key:0},[t.isLoggedIn?(Object(n["r"])(),Object(n["f"])("div",j,[Object(n["i"])("p",v,[y,Object(n["i"])("span",g,Object(n["B"])(t.user.name),1)]),Object(n["i"])("a",{class:"header-btn",onClick:e[1]||(e[1]=function(){return i.logout&&i.logout.apply(i,arguments)})},"Выйти"),Object(n["i"])(s,{to:"/"!=t.$route.path?"/":"/profile",class:"header-btn"},{default:Object(n["G"])((function(){return[Object(n["h"])(Object(n["B"])("/"!=t.$route.path?"На главную":"Профиль"),1)]})),_:1},8,["to"])])):(Object(n["r"])(),Object(n["f"])("div",p,[Object(n["i"])("div",m,[Object(n["i"])(s,{to:"/login",class:"header-btn"},{default:Object(n["G"])((function(){return[b]})),_:1})]),Object(n["i"])("div",h,[Object(n["i"])(s,{to:"/registration",class:"header-btn"},{default:Object(n["G"])((function(){return[O]})),_:1})])]))],64)):Object(n["g"])("",!0)])}var k=r("5502"),x={methods:{logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push("/")}))}},computed:Object(k["d"])(["authCompleted","isLoggedIn","user"])};r("3fd3");x.render=w;var S=x,P={class:"player"},E={class:"player-buttons"},$=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/arrow.svg"},null,-1),A=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/play.svg"},null,-1),M=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/pause.svg"},null,-1),T=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/arrow.svg"},null,-1),C={class:"player-txt",ref:"textAudioNameWrapperEl"},N={class:"player-time"},_=Object(n["i"])("div",{class:"player-progress-line"},null,-1);function I(t,e,r,a,o,i){return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["i"])("audio",{onTimeupdate:e[1]||(e[1]=function(){return i.progressUpdate&&i.progressUpdate.apply(i,arguments)}),id:"audio",src:i.currentAudioSrc},null,40,["src"]),Object(n["i"])("div",P,[Object(n["i"])("ul",E,[Object(n["i"])("li",{onClick:e[2]||(e[2]=function(){return i.flipping&&i.flipping.apply(i,arguments)}),onMousedown:e[3]||(e[3]=Object(n["I"])((function(){}),["prevent"])),class:"player-buttons-btn player-buttons-prev"},[$],32),t.play?(Object(n["r"])(),Object(n["f"])("li",{key:1,onClick:e[6]||(e[6]=function(){return i.switchPlay&&i.switchPlay.apply(i,arguments)}),onMousedown:e[7]||(e[7]=Object(n["I"])((function(){}),["prevent"])),class:"player-buttons-btn player-buttons-play"},[M],32)):(Object(n["r"])(),Object(n["f"])("li",{key:0,onClick:e[4]||(e[4]=function(){return i.switchPlay&&i.switchPlay.apply(i,arguments)}),onMousedown:e[5]||(e[5]=Object(n["I"])((function(){}),["prevent"])),class:"player-buttons-btn player-buttons-play"},[A],32)),Object(n["i"])("li",{onClick:e[8]||(e[8]=function(){return i.flipping&&i.flipping.apply(i,arguments)}),onMousedown:e[9]||(e[9]=Object(n["I"])((function(){}),["prevent"])),class:" player-buttons-btn player-buttons-next"},[T],32)]),Object(n["i"])("p",C,[t.currentAudio?(Object(n["r"])(),Object(n["f"])("span",{key:0,ref:"textAudioNameEl"},Object(n["B"])(t.currentAudio.author)+" - "+Object(n["B"])(t.currentAudio.name),513)):Object(n["g"])("",!0)],512),Object(n["i"])("div",{class:"player-progress",onClick:e[10]||(e[10]=function(){return i.audioRewind&&i.audioRewind.apply(i,arguments)})},[Object(n["i"])("span",N,Object(n["B"])(o.time),1),_])])],64)}var W,L=r("5530"),F=(r("25f0"),r("99af"),{data:function(){return{time:""}},computed:Object(L["a"])(Object(L["a"])({},Object(k["d"])({play:"play",user:"user",status:"status",currentAudio:function(t){return t.currentAudio?t.currentAudio:""}})),{},{currentAudioSrc:function(){return this.currentAudio.src?o+"/"+this.currentAudio.src:""}}),methods:{switchPlay:function(){this.$store.state.currentAudio||this.$store.commit("setCurrent",this.$store.state.tracks[0]),this.$store.commit("switchPlay")},flipping:function(t){var e=t.target;"IMG"==e.tagName&&(e=e.parentNode);var r=this.$store.getters.filtration.filteredTracks,n=r.indexOf(this.currentAudio);e.classList.contains("player-buttons-prev")?n>0&&(this.$store.commit("setCurrent",r[n-1]),this.play||this.switchPlay()):e.classList.contains("player-buttons-next")&&n<r.length-1&&n>-1&&(this.$store.commit("setCurrent",r[n+1]),this.play||this.switchPlay())},progressUpdate:function(t){if("/"==this.$route.path){var e=t.target,r=document.querySelector(".player-progress"),n=document.querySelector(".player-progress-line"),a=r.clientWidth/100,o=100*e.currentTime/e.duration;n.style.width=a*o+"px";var i=Math.floor(e.currentTime/60),s=Math.floor(e.currentTime-60*i);i=i.toString(),i.length<2&&(i="0"+i),s=s.toString(),s.length<2&&(s="0"+s),this.time="".concat(i,":").concat(s)}else this.switchPlay()},audioRewind:function(t){var e=document.getElementById("audio"),r=document.querySelector(".player-progress");e.currentTime=e.duration*t.offsetX/r.clientWidth}},watch:{play:function(t){var e=document.getElementById("audio"),r=e.getAttribute("src");r&&t&&e.play(),r&&!t&&e.pause()},currentAudio:function(t){var e=this,r=document.getElementById("audio");t&&this.$nextTick((function(){var r=e.$refs.textAudioNameWrapperEl,n=e.$refs.textAudioNameEl,a=n.offsetWidth,o=r.offsetWidth,i=a-o;if(n.style.transition="0s linear",n.style.transform="translateX(0px)",i<=0)n.style.transform="";else{var s;clearTimeout(W);var c=function(){this.currentAudio==t&&("translateX(0px)"==n.style.transform?(n.style.transition="2s linear",n.style.transform="translateX(-".concat(i,"px)"),s=3e3):(n.style.transition="0s linear",n.style.transform="translateX(0px)",s=1e3),W=setTimeout(c,s))}.bind(e);W=setTimeout(c,1e3)}})),setTimeout((function(){r.play()}),0)}}});r("f1aa");F.render=I;var B=F,G=(r("ac1f"),r("841c"),{class:"sidebar"}),U={class:"filter",action:""},q={class:"filter-genre"},H={key:0,class:"filter-genre-title"},X={key:1,class:"filter-genre-title"};function V(t,e,r,a,o,i){return Object(n["r"])(),Object(n["f"])("div",G,[Object(n["i"])("form",U,[Object(n["H"])(Object(n["i"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.search=t}),class:"filter-search",type:"text",placeholder:"Исполнитель или название трека"},null,512),[[n["E"],o.search]]),Object(n["i"])("div",q,[Object(n["i"])(n["b"],null,{default:Object(n["G"])((function(){return["success"==t.filtration.filterStatus?(Object(n["r"])(),Object(n["f"])("h3",H,"Жанры")):(Object(n["r"])(),Object(n["f"])("h3",X,"Ничего не найдено"))]})),_:1}),(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(t.genres,(function(t,r){return Object(n["r"])(),Object(n["f"])("label",{onMousedown:e[3]||(e[3]=Object(n["I"])((function(){}),["prevent"])),class:["filter-genre-label",i.toggleActive(r)]},[Object(n["H"])(Object(n["i"])("input",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return o.selectedGenres=t}),hidden:"",type:"checkbox",name:"genre",value:r},null,8,["value"]),[[n["D"],o.selectedGenres]]),Object(n["h"])(" "+Object(n["B"])(t),1)],34)})),256))]),Object(n["i"])("button",{onClick:e[4]||(e[4]=Object(n["I"])((function(){return i.setFilterParams&&i.setFilterParams.apply(i,arguments)}),["prevent"])),class:"filter-btn"},"Применить")])])}r("caad"),r("2532");var J={data:function(){return{search:"",selectedGenres:[]}},computed:Object(L["a"])(Object(L["a"])({},Object(k["d"])({genres:function(t){var e={};for(var r in t.genres)"default"!=r&&(e[r]=t.genres[r]);return e}})),Object(k["b"])(["filtration"])),methods:{toggleActive:function(t){return{"filter-genre-label-checked":this.selectedGenres.includes(t)}},setFilterParams:function(){this.$store.commit("setFilterParams",{search:this.search,selectedGenres:this.selectedGenres})}}};r("69f0");J.render=V;var z=J;function D(t,e,r,a,o,i){return Object(n["r"])(),Object(n["f"])("div",{class:["audio-list",i.audioListState]},[Object(n["i"])(n["c"],{appear:"",onBeforeLeave:i.beforeLeave,onBeforeEnter:i.beforeEnter,tag:"div"},{default:Object(n["G"])((function(){return[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(i.filtered,(function(t){return Object(n["r"])(),Object(n["f"])(Object(n["z"])(i.currentComponent),{key:t.name,audio:t},null,8,["audio"])})),128))]})),_:1},8,["onBeforeLeave","onBeforeEnter"])],2)}r("4de4");var R=Object(n["J"])("data-v-a0bab04c");Object(n["u"])("data-v-a0bab04c");var K={class:"audio"},Q=Object(n["i"])("img",{class:"audio-btn-img",src:"/icons/play.svg"},null,-1),Y=Object(n["i"])("img",{class:"audio-btn-img",src:"/icons/pause.svg"},null,-1);Object(n["s"])();var Z=R((function(t,e,r,a,o,i){return Object(n["r"])(),Object(n["f"])("div",K,[t.play?(Object(n["r"])(),Object(n["f"])("div",{key:1,onClick:e[2]||(e[2]=function(){return i.setPause&&i.setPause.apply(i,arguments)}),class:"audio-btn"},[Y])):(Object(n["r"])(),Object(n["f"])("div",{key:0,onClick:e[1]||(e[1]=function(){return i.setPlay&&i.setPlay.apply(i,arguments)}),class:"audio-btn"},[Q])),Object(n["i"])("p",{onMouseover:e[3]||(e[3]=function(){return i.textMoveOn&&i.textMoveOn.apply(i,arguments)}),onMouseout:e[4]||(e[4]=function(){return i.textMoveOff&&i.textMoveOff.apply(i,arguments)}),class:"audio-paragraph",ref:"audioNameWrapper"},[Object(n["i"])("span",{ref:"audioName"},Object(n["B"])(r.audio.author+" - "+r.audio.name),513)],544)])})),tt={props:["audio"],data:function(){return{audioNameWrapperEl:null,audioNameEl:null,textMoveStopped:!1}},computed:Object(k["d"])({play:function(t){return!(t.currentAudio!=this.audio||!t.play)}}),methods:Object(L["a"])(Object(L["a"])({},Object(k["c"])(["switchPlay","setCurrent"])),{},{setPlay:function(){return this.$store.state.currentAudio==this.audio?this.switchPlay():this.$store.state.currentAudio&&this.$store.state.play?void(this.$store.state.play&&this.setCurrent(this.audio)):(this.setCurrent(this.audio),void this.switchPlay())},setPause:function(){this.switchPlay()},textMoveOn:function(){var t=this,e=this.audioNameEl,r=this.audioNameWrapperEl,n=this.textMoveStopped;if(r)if(n)this.textMoveStopped=!1;else{e.style.transition="2s linear";var a=e.offsetWidth-r.offsetWidth;a<0||(e.style.transform="translateX("+-a+"px)",setTimeout((function(){e.style.transition="0s linear",e.style.transform="translateX(0px)",setTimeout(t.textMoveOn,500)}),2500))}else setTimeout(this.textMoveOn,1e3)},textMoveOff:function(){this.textMoveStopped=!0}}),mounted:function(){var t=this;if(this.audioNameEl=this.$refs.audioName,this.$refs.audioNameWrapper.offsetWidth)return this.audioNameWrapperEl=this.$refs.audioNameWrapper,this.audioNameWrapperEl;setTimeout((function(){t.audioNameWrapperEl=t.$refs.audioNameWrapper}),1e3)}};r("3d17");tt.render=Z,tt.__scopeId="data-v-a0bab04c";var et=tt,rt=Object(n["J"])("data-v-f83b2f46");Object(n["u"])("data-v-f83b2f46");var nt={class:"audio"},at={class:"audio-remove"};Object(n["s"])();var ot=rt((function(t,e,r,a,o,i){return Object(n["r"])(),Object(n["f"])("div",nt,[Object(n["i"])("p",{onMouseover:e[1]||(e[1]=function(){return i.textMoveOn&&i.textMoveOn.apply(i,arguments)}),onMouseout:e[2]||(e[2]=function(){return i.textMoveOff&&i.textMoveOff.apply(i,arguments)}),class:"audio-paragraph",ref:"audioNameWrapper"},[Object(n["i"])("span",{ref:"audioName"},Object(n["B"])(r.audio.author+" - "+r.audio.name),513)],544),Object(n["i"])("span",at,[Object(n["i"])("img",{onClick:e[3]||(e[3]=function(t){return i.remove(r.audio)}),src:"/icons/remove.svg",alt:"Delete"})])])})),it={props:["audio"],data:function(){return{audioNameWrapperEl:null,audioNameEl:null,textMoveStopped:!1}},methods:{remove:function(t){var e=this;this.axios.post(o+"/removeTrack",t).then((function(t){console.log("Успешно удален"),e.$store.dispatch("getTracks")}))},textMoveOn:function(){var t=this,e=this.audioNameEl,r=this.audioNameWrapperEl,n=this.textMoveStopped;if(n)this.textMoveStopped=!1;else{e.style.transition="2s";var a=e.offsetWidth-r.offsetWidth;a<0||(e.style.transform="translateX("+-a+"px)",setTimeout((function(){e.style.transition="0s",e.style.transform="translateX(0px)",setTimeout(t.textMoveOn,500)}),2500))}},textMoveOff:function(){this.textMoveStopped=!0}},mounted:function(){var t=this;if(this.audioNameEl=this.$refs.audioName,this.$refs.audioNameWrapper.offsetWidth)return this.audioNameWrapperEl=this.$refs.audioNameWrapper,this.audioNameWrapperEl;setTimeout((function(){t.audioNameWrapperEl=t.$refs.audioNameWrapper}),1e3)}};r("d109");it.render=ot,it.__scopeId="data-v-f83b2f46";var st=it,ct={data:function(){return{audioFirstAdd:!1}},components:{"audio-comp":et,"self-audio-comp":st},computed:Object(L["a"])(Object(L["a"])(Object(L["a"])({},Object(k["d"])(["user"])),Object(k["b"])(["filtration"])),{},{filtered:function(){var t=this;console.log(this.filtration);var e=this.$route.path;return"/profile"!=e?this.filtration.filteredTracks:this.filtration.filteredTracks.filter((function(e){return e.user_id==t.user.id}))},audioListState:function(){return this.filtered.length?"audio-list-opened":"audio-list-closed"},currentComponent:function(){var t=this.$route.path;return"/"==t?"audio-comp":"self-audio-comp"}}),methods:{beforeLeave:function(t){var e=window.getComputedStyle(t),r=e.marginLeft,n=e.marginTop;t.style.left="".concat(t.offsetLeft-parseFloat(r,10),"px"),t.style.top="".concat(t.offsetTop-parseFloat(n,10),"px")},beforeEnter:function(t){var e=this;this.audioFirstAdd&&"/profile"==this.$route.path&&(t.addEventListener("transitionend",(function(){t.style.transitionDelay="",e.audioFirstAdd&&(e.audioFirstAdd=!1)}),{once:!0}),t.style.transitionDelay=".8s")}},watch:{audioListState:function(t,e){"audio-list-closed"==e&&(this.audioFirstAdd=!0)}}};r("8a90");ct.render=D;var ut=ct,lt={data:function(){return{}},components:{"header-comp":S,"player-comp":B,"sidebar-comp":z,"audio-list-comp":ut}};r("104b");lt.render=l;var dt=lt,ft={class:"form-wrap"},pt=Object(n["h"])("Назад"),mt=Object(n["i"])("h1",{class:"form-header"},"Регистрация",-1),bt=Object(n["i"])("button",{class:"form-btn",type:"submit"},"Зарегистрироваться",-1);function ht(t,e,r,a,o,i){var s=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("div",ft,[Object(n["i"])("form",{class:"form",onSubmit:e[5]||(e[5]=Object(n["I"])((function(){return i.register&&i.register.apply(i,arguments)}),["prevent"]))},[Object(n["i"])(s,{class:"form-btn form-btn-back",to:"/"},{default:Object(n["G"])((function(){return[pt]})),_:1}),mt,Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"name",type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return o.name=t}),placeholder:"Имя",required:"",autofocus:""},null,512),[[n["E"],o.name]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"email",type:"email","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.email=t}),placeholder:"Email",required:""},null,512),[[n["E"],o.email]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"password",type:"password","onUpdate:modelValue":e[3]||(e[3]=function(t){return o.password=t}),placeholder:"Пароль",required:""},null,512),[[n["E"],o.password]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"password-confirm",type:"password","onUpdate:modelValue":e[4]||(e[4]=function(t){return o.password_confirmation=t}),placeholder:"Повторите пароль",required:""},null,512),[[n["E"],o.password_confirmation]]),bt],32)])}var Ot={data:function(){return{name:"",email:"",password:"",password_confirmation:"",is_admin:null}},methods:{register:function(){var t=this,e={name:this.name,email:this.email,password:this.password,is_admin:this.is_admin};this.$store.dispatch("register",e).then((function(){return t.$router.push("/")})).catch((function(t){return console.log(t)}))}}};Ot.render=ht;var jt=Ot,vt={class:"form-wrap"},yt=Object(n["h"])("Назад"),gt=Object(n["i"])("h1",{class:"form-header"},"Вход",-1),wt=Object(n["i"])("button",{class:"form-btn",type:"submit"},"Войти",-1);function kt(t,e,r,a,o,i){var s=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("div",vt,[Object(n["i"])("form",{class:"form",onSubmit:e[3]||(e[3]=Object(n["I"])((function(){return i.login&&i.login.apply(i,arguments)}),["prevent"]))},[Object(n["i"])(s,{class:"form-btn form-btn-back",to:"/"},{default:Object(n["G"])((function(){return[yt]})),_:1}),gt,Object(n["H"])(Object(n["i"])("input",{class:"form-input",required:"","onUpdate:modelValue":e[1]||(e[1]=function(t){return o.email=t}),type:"email",placeholder:"Email"},null,512),[[n["E"],o.email]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",required:"","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.password=t}),type:"password",placeholder:"Пароль"},null,512),[[n["E"],o.password]]),wt],32)])}var xt={data:function(){return{email:"",password:""}},methods:{login:function(){var t=this,e=this.email,r=this.password;this.$store.dispatch("login",{email:e,password:r}).then((function(){return t.$router.push("/")})).catch((function(t){return console.log(t)}))}}};xt.render=kt;var St=xt,Pt=Object(n["J"])("data-v-7e46c864");Object(n["u"])("data-v-7e46c864");var Et={class:"wrapper"};Object(n["s"])();var $t=Pt((function(t,e,r,a,o,i){var s=Object(n["y"])("header-comp"),c=Object(n["y"])("upload-comp"),u=Object(n["y"])("audio-list-comp");return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["i"])(s),Object(n["i"])("div",Et,[Object(n["i"])(c),Object(n["i"])(u)])],64)})),At=Object(n["J"])("data-v-0640df7e");Object(n["u"])("data-v-0640df7e");var Mt=Object(n["i"])("h3",{class:"form-header"},"Добавить трек",-1),Tt=Object(n["i"])("input",{type:"text",class:"form-input author",maxlength:"40",name:"author",placeholder:"Автор"},null,-1),Ct=Object(n["i"])("input",{type:"text",class:"form-input name",maxlength:"40",name:"name",placeholder:"Название"},null,-1),Nt={name:"genre",class:"form-input genres"},_t={class:"uploadFile form-input",for:"uploadFile"};Object(n["s"])();var It=At((function(t,e,r,a,o,i){return Object(n["r"])(),Object(n["f"])("form",{class:"uploadForm form",onSubmit:e[2]||(e[2]=Object(n["I"])((function(){return i.upload&&i.upload.apply(i,arguments)}),["prevent"])),id:"uploadForm",enctype:"multipart/form-data"},[Mt,Tt,Ct,Object(n["i"])("select",Nt,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(t.genres,(function(t,e){return Object(n["r"])(),Object(n["f"])("option",{selected:"default"==e,value:e},Object(n["B"])(t),9,["selected","value"])})),256))]),Object(n["i"])("input",{onChange:e[1]||(e[1]=function(){return i.selectedFile&&i.selectedFile.apply(i,arguments)}),class:"form-input file",id:"uploadFile",hidden:"",type:"file",name:"file"},null,32),Object(n["i"])("label",_t,Object(n["B"])(o.fileName),1),Object(n["i"])("input",{type:"submit",style:i.uploadBtnColor,class:"form-btn",value:i.uploadStatus},null,12,["value"])],32)})),Wt={data:function(){return{fileName:"Выберите аудио",uploadPercentage:0,isUpload:!1}},computed:Object(L["a"])(Object(L["a"])({},Object(k["d"])(["genres"])),{},{uploadBtnColor:function(){return{background:"linear-gradient(to right, #36b23a ".concat(this.uploadPercentage,"%, #051d36 ").concat(this.uploadPercentage,"%)")}},uploadStatus:function(){return this.isUpload?"Загружается...":"Добавить"}}),methods:{selectedFile:function(t){var e=t.target.files;if(!e.length)return this.fileName="Выберите аудио";this.fileName=e[0].name},upload:function(){var t=this,e=document.getElementById("uploadForm"),r=e.querySelectorAll("select"),n=new FormData(e),a=this.checkForm();a&&(e.reset(),this.fileName="Выберите аудио",r.value="default",this.isUpload=!0,this.axios.post(o+"/upload",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){this.uploadPercentage=Math.round(t.loaded/t.total*100)}.bind(this)}).then((function(){t.uploadPercentage=0,t.isUpload=!1,t.$store.dispatch("getTracks"),console.log("SUCCESS!!")})).catch((function(t){console.log(t),console.log("FAILURE!!")})))},checkForm:function(){var t=document.querySelector(".author"),e=document.querySelector(".name"),r=document.querySelector(".genres"),n=document.querySelector(".file"),a=!0;return t.value||(a=o(t)),e.value||(a=o(e)),"default"==r.value&&(a=o(r)),n.files.length||(a=o(n.labels[0])),a;function o(t){return t.addEventListener("transitionend",(function(){return t.classList.remove("error")}),{once:!0}),t.classList.add("error"),!1}}}};r("7304");Wt.render=It,Wt.__scopeId="data-v-0640df7e";var Lt=Wt,Ft={components:{"header-comp":S,"upload-comp":Lt,"audio-list-comp":ut}};r("6b92");Ft.render=$t,Ft.__scopeId="data-v-7e46c864";var Bt=Ft,Gt=[{path:"/",name:"Home",component:dt},{path:"/registration",name:"Reg",component:jt},{path:"/login",name:"Login",component:St},{path:"/profile",name:"Profile",component:Bt}],Ut=Object(c["a"])({history:Object(c["b"])("/"),routes:Gt}),qt=Ut,Ht=r("bc3a"),Xt=r.n(Ht),Vt=Object(k["a"])({state:{authCompleted:!1,isLoggedIn:!1,status:"",token:localStorage.getItem("token")||"",user:{},play:!1,currentAudio:null,genres:{default:"Жанр",pop:"Поп",club:"Клубная",rock:"Рок",rap:"Реп",chanson:"Шансон",classic:"Классическая",electronic:"Электронная"},filterParams:{search:"",selectedGenres:[]},tracks:[]},mutations:{setAuthComp:function(t){return t.authCompleted=!t.authCompleted},switchPlay:function(t){return t.play=!t.play},setCurrent:function(t,e){return t.currentAudio=e},setTrackList:function(t,e){return t.tracks=e},setFilterParams:function(t,e){t.filterParams=e},auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.user=e.user,t.isLoggedIn=!0,t.token||(t.token=e.token)},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token="",t.user={},t.isLoggedIn=!1},setFilterStatus:function(t,e){t.filterStatus=e}},getters:{filtration:function(t){var e=t.tracks,r="success";return e.length?(t.filterParams.search&&(e=e.filter((function(e){return e.name.toLowerCase().includes(t.filterParams.search.toLowerCase())||e.author.toLowerCase().includes(t.filterParams.search.toLowerCase())}))),0!=t.filterParams.selectedGenres.length&&(e=e.filter((function(e){for(var r=0;r<t.filterParams.selectedGenres.length;r++)if(t.filterParams.selectedGenres[r]==e.genre)return!0}))),0==e.length?(console.log(e),console.log(this),r="fail",{filteredTracks:t.tracks,filterStatus:r}):{filteredTracks:e,filterStatus:r}):{filteredTracks:e,filterStatus:r}},isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}},actions:{register:function(t,e){var r=t.commit;return new Promise((function(t,n){r("auth_request"),Xt()({url:o+"/registration",data:e,method:"POST"}).then((function(e){var n=e.data.token;localStorage.setItem("token",n),Xt.a.defaults.headers.common["Authorization"]=n,r("auth_success",e.data),t(e)})).catch((function(t){r("auth_error",t),localStorage.removeItem("token"),n(t)}))}))},login:function(t,e){var r=t.commit;return new Promise((function(t,n){r("auth_request"),Xt()({url:o+"/login",data:e,method:"POST"}).then((function(e){var n=e.data.token;localStorage.setItem("token",n),Xt.a.defaults.headers.common["Authorization"]=n,r("auth_success",e.data),t(e)})).catch((function(t){r("auth_error"),localStorage.removeItem("token"),n(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t,r){e("logout"),localStorage.removeItem("token"),delete Xt.a.defaults.headers.common["Authorization"],t()}))},getTracks:function(t){var e=t.commit;Xt()({url:o+"/getTracks",method:"GET"}).then((function(t){e("setTrackList",t.data)}))}}}),Jt=r("2106"),zt=r.n(Jt);Object(n["e"])(s).use(zt.a,Xt.a).use(Vt).use(qt).mount("#app")},"69f0":function(t,e,r){"use strict";r("89f1")},"6b92":function(t,e,r){"use strict";r("f11f")},7304:function(t,e,r){"use strict";r("e446")},"89f1":function(t,e,r){},"8a90":function(t,e,r){"use strict";r("2309")},"8e19":function(t,e,r){},"939c":function(t,e,r){},ad82:function(t,e,r){"use strict";r("8e19")},d109:function(t,e,r){"use strict";r("16ad")},dc70:function(t,e,r){},e446:function(t,e,r){},f11f:function(t,e,r){},f1aa:function(t,e,r){"use strict";r("2823")}});
//# sourceMappingURL=app.8470565a.js.map