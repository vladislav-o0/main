(function(t){function e(e){for(var n,c,i=e[0],s=e[1],u=e[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var s=r[i];0!==o[s]&&(n=!1)}n&&(a.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},o={app:0},a=[];function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=s;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0985":function(t,e,r){"use strict";r("d8f3")},"1a77":function(t,e,r){"use strict";r("b93f")},2088:function(t,e,r){},"209d":function(t,e,r){"use strict";r("d740")},"283d":function(t,e,r){},"33ac":function(t,e,r){},"473d":function(t,e,r){"use strict";r("e816")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function o(t,e,r,o,a,c){var i=Object(n["y"])("router-view");return Object(n["r"])(),Object(n["f"])(i)}r("d3b7");var a="http://84.201.164.162:3000",c={beforeCreate:function(){var t=this,e=localStorage.getItem("token");e?(this.axios.defaults.headers.common["Authorization"]=e,this.axios({url:a+"/auth",method:"GET"}).then((function(e){t.$store.commit("auth_success",{user:e.data.user})})).finally((function(){t.$store.commit("setAuthComp")}))):this.$store.commit("setAuthComp"),this.$store.dispatch("getTracks")}};r("1a77");c.render=o;var i=c,s=r("6c02"),u={class:"main wrapper"};function l(t,e,r,o,a,c){var i=Object(n["y"])("header-comp"),s=Object(n["y"])("player-comp"),l=Object(n["y"])("audio-list-comp"),d=Object(n["y"])("sidebar-comp");return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["i"])(i),Object(n["i"])(s),Object(n["i"])("div",u,[Object(n["i"])(l),Object(n["i"])(d)])],64)}r("b0c0");var d={class:"header"},f=Object(n["i"])("img",{class:"header-logo",src:"logo.svg",alt:"logo"},null,-1),p={key:0,class:"header-wrap-buttons"},b={class:"header-buttons"},m=Object(n["h"])("Войти"),h={class:"header-buttons"},O=Object(n["h"])("Регистрация"),j={key:1,class:"header-wrap-buttons"},g=Object(n["h"])("Вы вошли как "),v={class:"header-nickname"};function y(t,e,r,o,a,c){var i=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("div",d,[f,t.authCompleted?(Object(n["r"])(),Object(n["f"])(n["a"],{key:0},[t.isLoggedIn?(Object(n["r"])(),Object(n["f"])("div",j,[Object(n["i"])("p",null,[g,Object(n["i"])("span",v,Object(n["B"])(t.user.name),1)]),Object(n["i"])("a",{class:"header-btn",onClick:e[1]||(e[1]=function(){return c.logout&&c.logout.apply(c,arguments)})},"Выйти"),Object(n["i"])(i,{to:"/"!=t.$route.path?"/":"/profile",class:"header-btn"},{default:Object(n["G"])((function(){return[Object(n["h"])(Object(n["B"])("/"!=t.$route.path?"На главную":"Профиль"),1)]})),_:1},8,["to"])])):(Object(n["r"])(),Object(n["f"])("div",p,[Object(n["i"])("div",b,[Object(n["i"])(i,{to:"/login",class:"header-btn"},{default:Object(n["G"])((function(){return[m]})),_:1})]),Object(n["i"])("div",h,[Object(n["i"])(i,{to:"/registration",class:"header-btn"},{default:Object(n["G"])((function(){return[O]})),_:1})])]))],64)):Object(n["g"])("",!0)])}var w=r("5502"),k={methods:{logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push("/")}))}},computed:Object(w["d"])(["authCompleted","isLoggedIn","user"])};r("0985");k.render=y;var P=k,S={class:"player"},C={class:"player-buttons"},_=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/arrow.svg"},null,-1),A=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/play.svg"},null,-1),I=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/pause.svg"},null,-1),$=Object(n["i"])("img",{class:"player-buttons-img",src:"/icons/arrow.svg"},null,-1),L={class:"player-txt"},T={key:0},x={class:"player-time"},F=Object(n["i"])("div",{class:"player-progress-line"},null,-1);function E(t,e,r,o,a,c){return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["i"])("audio",{onTimeupdate:e[1]||(e[1]=function(){return c.progressUpdate&&c.progressUpdate.apply(c,arguments)}),id:"audio",src:c.currentAudioSrc},null,40,["src"]),Object(n["i"])("div",S,[Object(n["i"])("ul",C,[Object(n["i"])("li",{onClick:e[2]||(e[2]=function(){return c.flipping&&c.flipping.apply(c,arguments)}),onMousedown:e[3]||(e[3]=Object(n["I"])((function(){}),["prevent"])),class:"player-buttons-btn player-buttons-prev"},[_],32),t.play?(Object(n["r"])(),Object(n["f"])("li",{key:1,onClick:e[6]||(e[6]=function(){return c.switchPlay&&c.switchPlay.apply(c,arguments)}),onMousedown:e[7]||(e[7]=Object(n["I"])((function(){}),["prevent"])),class:"player-buttons-btn player-buttons-play"},[I],32)):(Object(n["r"])(),Object(n["f"])("li",{key:0,onClick:e[4]||(e[4]=function(){return c.switchPlay&&c.switchPlay.apply(c,arguments)}),onMousedown:e[5]||(e[5]=Object(n["I"])((function(){}),["prevent"])),class:"player-buttons-btn player-buttons-play"},[A],32)),Object(n["i"])("li",{onClick:e[8]||(e[8]=function(){return c.flipping&&c.flipping.apply(c,arguments)}),onMousedown:e[9]||(e[9]=Object(n["I"])((function(){}),["prevent"])),class:" player-buttons-btn player-buttons-next"},[$],32)]),Object(n["i"])("p",L,[Object(n["h"])(Object(n["B"])(t.currentAudio.author),1),t.currentAudio?(Object(n["r"])(),Object(n["f"])("span",T," - ")):Object(n["g"])("",!0),Object(n["h"])(Object(n["B"])(t.currentAudio.name),1)]),Object(n["i"])("div",{class:"player-progress",onClick:e[10]||(e[10]=function(){return c.audioRewind&&c.audioRewind.apply(c,arguments)})},[Object(n["i"])("span",x,Object(n["B"])(a.time),1),F])])],64)}var B=r("5530"),G=(r("25f0"),r("99af"),{data:function(){return{time:""}},computed:Object(B["a"])(Object(B["a"])({},Object(w["d"])({play:"play",user:"user",status:"status",currentAudio:function(t){return t.currentAudio?t.currentAudio:""}})),{},{currentAudioSrc:function(){return this.currentAudio.src?a+"/"+this.currentAudio.src:""}}),methods:{switchPlay:function(){this.$store.state.currentAudio||this.$store.commit("setCurrent",this.$store.state.tracks[0]),this.$store.commit("switchPlay")},flipping:function(t){var e=t.target;"IMG"==e.tagName&&(e=e.parentNode);var r=this.$store.getters.filtration.filteredTracks,n=r.indexOf(this.currentAudio);e.classList.contains("player-buttons-prev")?n>0&&(this.$store.commit("setCurrent",r[n-1]),this.play||this.switchPlay()):e.classList.contains("player-buttons-next")&&n<r.length-1&&n>-1&&(this.$store.commit("setCurrent",r[n+1]),this.play||this.switchPlay())},progressUpdate:function(t){if("/"==this.$route.path){var e=t.target,r=document.querySelector(".player-progress"),n=document.querySelector(".player-progress-line"),o=r.clientWidth/100,a=100*e.currentTime/e.duration;n.style.width=o*a+"px";var c=Math.floor(e.currentTime/60),i=Math.floor(e.currentTime-60*c);c=c.toString(),c.length<2&&(c="0"+c),i=i.toString(),i.length<2&&(i="0"+i),this.time="".concat(c,":").concat(i)}else this.switchPlay()},audioRewind:function(t){var e=document.getElementById("audio"),r=document.querySelector(".player-progress");e.currentTime=e.duration*t.offsetX/r.clientWidth}},watch:{play:function(t){var e=document.getElementById("audio"),r=e.getAttribute("src");r&&t&&e.play(),r&&!t&&e.pause()},currentAudio:function(t){var e=document.getElementById("audio");setTimeout((function(){e.play()}),0)}}});r("b020");G.render=E;var U=G,q=(r("ac1f"),r("841c"),{class:"sidebar"}),M={class:"filter",action:""},H={class:"filter-genre"},V={key:0,class:"filter-genre-title"},J={key:1,class:"filter-genre-title"};function N(t,e,r,o,a,c){return Object(n["r"])(),Object(n["f"])("div",q,[Object(n["i"])("form",M,[Object(n["H"])(Object(n["i"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.search=t}),class:"filter-search",type:"text",placeholder:"Исполнитель или название трека"},null,512),[[n["E"],a.search]]),Object(n["i"])("div",H,[Object(n["i"])(n["b"],null,{default:Object(n["G"])((function(){return["success"==t.filtration.filterStatus?(Object(n["r"])(),Object(n["f"])("h3",V,"Жанры")):(Object(n["r"])(),Object(n["f"])("h3",J,"Ничего не найдено"))]})),_:1}),(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(t.genres,(function(t,r){return Object(n["r"])(),Object(n["f"])("label",{onMousedown:e[3]||(e[3]=Object(n["I"])((function(){}),["prevent"])),class:["filter-genre-label",c.toggleActive(r)]},[Object(n["H"])(Object(n["i"])("input",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.selectedGenres=t}),hidden:"",type:"checkbox",name:"genre",value:r},null,8,["value"]),[[n["D"],a.selectedGenres]]),Object(n["h"])(" "+Object(n["B"])(t),1)],34)})),256))]),Object(n["i"])("button",{onClick:e[4]||(e[4]=Object(n["I"])((function(){return c.setFilterParams&&c.setFilterParams.apply(c,arguments)}),["prevent"])),class:"filter-btn"},"Применить")])])}r("caad"),r("2532");var z={data:function(){return{search:"",selectedGenres:[]}},computed:Object(B["a"])(Object(B["a"])({},Object(w["d"])({genres:function(t){var e={};for(var r in t.genres)"default"!=r&&(e[r]=t.genres[r]);return e}})),Object(w["b"])(["filtration"])),methods:{toggleActive:function(t){return{"filter-genre-label-checked":this.selectedGenres.includes(t)}},setFilterParams:function(){this.$store.commit("setFilterParams",{search:this.search,selectedGenres:this.selectedGenres})}}};r("dc4c");z.render=N;var R=z;function D(t,e,r,o,a,c){return Object(n["r"])(),Object(n["f"])("div",{class:["audio-list",c.audioListState]},[Object(n["i"])(n["c"],{appear:"",onBeforeLeave:c.beforeLeave,onBeforeEnter:c.beforeEnter,tag:"div"},{default:Object(n["G"])((function(){return[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(c.filtered,(function(t){return Object(n["r"])(),Object(n["f"])(Object(n["z"])(c.currentComponent),{key:t.name,audio:t},null,8,["audio"])})),128))]})),_:1},8,["onBeforeLeave","onBeforeEnter"])],2)}r("4de4");var W=Object(n["J"])("data-v-60a45cee");Object(n["u"])("data-v-60a45cee");var X={class:"audio"},K=Object(n["i"])("img",{class:"audio-btn-img",src:"/icons/play.svg"},null,-1),Q=Object(n["i"])("img",{class:"audio-btn-img",src:"/icons/pause.svg"},null,-1);Object(n["s"])();var Y=W((function(t,e,r,o,a,c){return Object(n["r"])(),Object(n["f"])("div",X,[t.play?(Object(n["r"])(),Object(n["f"])("div",{key:1,onClick:e[2]||(e[2]=function(){return c.setPause&&c.setPause.apply(c,arguments)}),class:"audio-btn"},[Q])):(Object(n["r"])(),Object(n["f"])("div",{key:0,onClick:e[1]||(e[1]=function(){return c.setPlay&&c.setPlay.apply(c,arguments)}),class:"audio-btn"},[K])),Object(n["i"])("div",null,Object(n["B"])(r.audio.author)+" - "+Object(n["B"])(r.audio.name),1)])})),Z={props:["audio"],computed:Object(w["d"])({play:function(t){return!(t.currentAudio!=this.audio||!t.play)}}),methods:Object(B["a"])(Object(B["a"])({},Object(w["c"])(["switchPlay","setCurrent"])),{},{setPlay:function(){return this.$store.state.currentAudio==this.audio?this.switchPlay():this.$store.state.currentAudio&&this.$store.state.play?void(this.$store.state.play&&this.setCurrent(this.audio)):(this.setCurrent(this.audio),void this.switchPlay())},setPause:function(){this.switchPlay()}})};r("c67b");Z.render=Y,Z.__scopeId="data-v-60a45cee";var tt=Z,et=Object(n["J"])("data-v-4a595e1a");Object(n["u"])("data-v-4a595e1a");var rt={class:"audio"};Object(n["s"])();var nt=et((function(t,e,r,o,a,c){return Object(n["r"])(),Object(n["f"])("div",rt,[Object(n["i"])("p",null,Object(n["B"])(r.audio.author)+" - "+Object(n["B"])(r.audio.name),1),Object(n["i"])("span",{onClick:e[1]||(e[1]=function(t){return c.remove(r.audio)}),class:"audio-remove"},"Удалить")])})),ot={props:["audio"],methods:{remove:function(t){var e=this;this.axios.post(a+"/removeTrack",t).then((function(t){console.log("Успешно удален"),e.$store.dispatch("getTracks")}))}}};r("7cbc");ot.render=nt,ot.__scopeId="data-v-4a595e1a";var at=ot,ct={data:function(){return{audioFirstAdd:!1}},components:{"audio-comp":tt,"self-audio-comp":at},computed:Object(B["a"])(Object(B["a"])(Object(B["a"])({},Object(w["d"])(["user"])),Object(w["b"])(["filtration"])),{},{filtered:function(){var t=this;console.log(this.filtration);var e=this.$route.path;return"/profile"!=e?this.filtration.filteredTracks:this.filtration.filteredTracks.filter((function(e){return e.user_id==t.user.id}))},audioListState:function(){return this.filtered.length?"audio-list-opened":"audio-list-closed"},currentComponent:function(){var t=this.$route.path;return"/"==t?"audio-comp":"self-audio-comp"}}),methods:{beforeLeave:function(t){var e=window.getComputedStyle(t),r=e.marginLeft,n=e.marginTop;t.style.left="".concat(t.offsetLeft-parseFloat(r,10),"px"),t.style.top="".concat(t.offsetTop-parseFloat(n,10),"px")},beforeEnter:function(t){var e=this;this.audioFirstAdd&&"/profile"==this.$route.path&&(t.addEventListener("transitionend",(function(){t.style.transitionDelay="",e.audioFirstAdd&&(e.audioFirstAdd=!1)}),{once:!0}),t.style.transitionDelay=".8s")}},watch:{audioListState:function(t,e){"audio-list-closed"==e&&(this.audioFirstAdd=!0)}}};r("209d");ct.render=D;var it=ct,st={data:function(){return{}},components:{"header-comp":P,"player-comp":U,"sidebar-comp":R,"audio-list-comp":it}};r("93bf");st.render=l;var ut=st,lt={class:"form-wrap"},dt=Object(n["h"])("Назад"),ft=Object(n["i"])("h1",{class:"form-header"},"Регистрация",-1),pt=Object(n["i"])("button",{class:"form-btn",type:"submit"},"Зарегистрироваться",-1);function bt(t,e,r,o,a,c){var i=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("div",lt,[Object(n["i"])("form",{class:"form",onSubmit:e[5]||(e[5]=Object(n["I"])((function(){return c.register&&c.register.apply(c,arguments)}),["prevent"]))},[Object(n["i"])(i,{class:"form-btn form-btn-back",to:"/"},{default:Object(n["G"])((function(){return[dt]})),_:1}),ft,Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"name",type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.name=t}),placeholder:"Имя",required:"",autofocus:""},null,512),[[n["E"],a.name]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"email",type:"email","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.email=t}),placeholder:"Email",required:""},null,512),[[n["E"],a.email]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"password",type:"password","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.password=t}),placeholder:"Пароль",required:""},null,512),[[n["E"],a.password]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",id:"password-confirm",type:"password","onUpdate:modelValue":e[4]||(e[4]=function(t){return a.password_confirmation=t}),placeholder:"Повторите пароль",required:""},null,512),[[n["E"],a.password_confirmation]]),pt],32)])}var mt={data:function(){return{name:"",email:"",password:"",password_confirmation:"",is_admin:null}},methods:{register:function(){var t=this,e={name:this.name,email:this.email,password:this.password,is_admin:this.is_admin};this.$store.dispatch("register",e).then((function(){return t.$router.push("/")})).catch((function(t){return console.log(t)}))}}};mt.render=bt;var ht=mt,Ot={class:"form-wrap"},jt=Object(n["h"])("Назад"),gt=Object(n["i"])("h1",{class:"form-header"},"Вход",-1),vt=Object(n["i"])("button",{class:"form-btn",type:"submit"},"Войти",-1);function yt(t,e,r,o,a,c){var i=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("div",Ot,[Object(n["i"])("form",{class:"form",onSubmit:e[3]||(e[3]=Object(n["I"])((function(){return c.login&&c.login.apply(c,arguments)}),["prevent"]))},[Object(n["i"])(i,{class:"form-btn form-btn-back",to:"/"},{default:Object(n["G"])((function(){return[jt]})),_:1}),gt,Object(n["H"])(Object(n["i"])("input",{class:"form-input",required:"","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.email=t}),type:"email",placeholder:"Email"},null,512),[[n["E"],a.email]]),Object(n["H"])(Object(n["i"])("input",{class:"form-input",required:"","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.password=t}),type:"password",placeholder:"Пароль"},null,512),[[n["E"],a.password]]),vt],32)])}var wt={data:function(){return{email:"",password:""}},methods:{login:function(){var t=this,e=this.email,r=this.password;this.$store.dispatch("login",{email:e,password:r}).then((function(){return t.$router.push("/")})).catch((function(t){return console.log(t)}))}}};wt.render=yt;var kt=wt,Pt=Object(n["J"])("data-v-131d9909");Object(n["u"])("data-v-131d9909");var St={class:"wrapper"};Object(n["s"])();var Ct=Pt((function(t,e,r,o,a,c){var i=Object(n["y"])("header-comp"),s=Object(n["y"])("upload-comp"),u=Object(n["y"])("audio-list-comp");return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["i"])(i),Object(n["i"])("div",St,[Object(n["i"])(s),Object(n["i"])(u)])],64)})),_t=Object(n["J"])("data-v-bc0fd34c");Object(n["u"])("data-v-bc0fd34c");var At=Object(n["i"])("h3",{class:"form-header"},"Добавить трек",-1),It=Object(n["i"])("input",{type:"text",class:"form-input author",name:"author",placeholder:"Автор"},null,-1),$t=Object(n["i"])("input",{type:"text",class:"form-input name",name:"name",placeholder:"Название"},null,-1),Lt={name:"genre",class:"form-input genres"},Tt={class:"uploadFile form-input",for:"uploadFile"};Object(n["s"])();var xt=_t((function(t,e,r,o,a,c){return Object(n["r"])(),Object(n["f"])("form",{class:"uploadForm form",onSubmit:e[2]||(e[2]=Object(n["I"])((function(){return c.upload&&c.upload.apply(c,arguments)}),["prevent"])),id:"uploadForm",enctype:"multipart/form-data"},[At,It,$t,Object(n["i"])("select",Lt,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(t.genres,(function(t,e){return Object(n["r"])(),Object(n["f"])("option",{disabled:"default"==e,selected:"default"==e,value:e},Object(n["B"])(t),9,["disabled","selected","value"])})),256))]),Object(n["i"])("input",{onChange:e[1]||(e[1]=function(){return c.selectedFile&&c.selectedFile.apply(c,arguments)}),class:"form-input file",id:"uploadFile",hidden:"",type:"file",name:"file"},null,32),Object(n["i"])("label",Tt,Object(n["B"])(a.fileName),1),Object(n["i"])("input",{type:"submit",style:c.uploadBtnColor,class:"form-btn",value:c.uploadStatus},null,12,["value"])],32)})),Ft={data:function(){return{fileName:"Выберите аудио",uploadPercentage:0,isUpload:!1}},computed:Object(B["a"])(Object(B["a"])({},Object(w["d"])(["genres"])),{},{uploadBtnColor:function(){return{background:"linear-gradient(to right, #36b23a ".concat(this.uploadPercentage,"%, #051d36 ").concat(this.uploadPercentage,"%)")}},uploadStatus:function(){return this.isUpload?"Загружается...":"Добавить"}}),methods:{selectedFile:function(t){var e=t.target.files;if(!e.length)return this.fileName="Выберите аудио";this.fileName=e[0].name},upload:function(){var t=this,e=document.getElementById("uploadForm"),r=new FormData(e),n=this.checkForm();n&&(this.isUpload=!0,this.axios.post(a+"/upload",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){this.uploadPercentage=Math.round(t.loaded/t.total*100)}.bind(this)}).then((function(){t.uploadPercentage=0,t.isUpload=!1,t.$store.dispatch("getTracks"),console.log("SUCCESS!!")})).catch((function(t){console.log(t),console.log("FAILURE!!")})))},checkForm:function(){var t=document.querySelector(".author"),e=document.querySelector(".name"),r=document.querySelector(".genres"),n=document.querySelector(".file"),o=!0;return t.value||(o=a(t)),e.value||(o=a(e)),"default"==r.value&&(o=a(r)),n.files.length||(o=a(n.labels[0])),o;function a(t){return t.addEventListener("transitionend",(function(){return t.classList.remove("error")}),{once:!0}),t.classList.add("error"),!1}}}};r("473d");Ft.render=xt,Ft.__scopeId="data-v-bc0fd34c";var Et=Ft,Bt={components:{"header-comp":P,"upload-comp":Et,"audio-list-comp":it}};r("929c");Bt.render=Ct,Bt.__scopeId="data-v-131d9909";var Gt=Bt,Ut=[{path:"/",name:"Home",component:ut},{path:"/registration",name:"Reg",component:ht},{path:"/login",name:"Login",component:kt},{path:"/profile",name:"Profile",component:Gt}],qt=Object(s["a"])({history:Object(s["b"])("/"),routes:Ut}),Mt=qt,Ht=r("bc3a"),Vt=r.n(Ht),Jt=Object(w["a"])({state:{authCompleted:!1,isLoggedIn:!1,status:"",token:localStorage.getItem("token")||"",user:{},play:!1,currentAudio:null,genres:{default:"Жанр",pop:"Поп",club:"Клубная",rock:"Рок",rap:"Реп",chanson:"Шансон",classic:"Классическая",electronic:"Электронная"},filterParams:{search:"",selectedGenres:[]},tracks:[]},mutations:{setAuthComp:function(t){return t.authCompleted=!t.authCompleted},switchPlay:function(t){return t.play=!t.play},setCurrent:function(t,e){return t.currentAudio=e},setTrackList:function(t,e){return t.tracks=e},setFilterParams:function(t,e){t.filterParams=e},auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.user=e.user,t.isLoggedIn=!0,t.token||(t.token=e.token)},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token="",t.user={},t.isLoggedIn=!1}},getters:{filtration:function(t){var e=t.tracks,r="success";return e.length?(t.filterParams.search&&(e=e.filter((function(e){return e.name.toLowerCase().includes(t.filterParams.search.toLowerCase())||e.author.toLowerCase().includes(t.filterParams.search.toLowerCase())}))),0!=t.filterParams.selectedGenres.length&&(e=e.filter((function(e){for(var r=0;r<t.filterParams.selectedGenres.length;r++)if(t.filterParams.selectedGenres[r]==e.genre)return!0}))),0==e.length?(console.log(e),console.log(this),r="fail",{filteredTracks:t.tracks,filterStatus:r}):{filteredTracks:e,filterStatus:r}):{filteredTracks:e,filterStatus:r}},isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}},actions:{register:function(t,e){var r=t.commit;return new Promise((function(t,n){r("auth_request"),Vt()({url:a+"/registration",data:e,method:"POST"}).then((function(e){var n=e.data.token;localStorage.setItem("token",n),Vt.a.defaults.headers.common["Authorization"]=n,r("auth_success",e.data),t(e)})).catch((function(t){r("auth_error",t),localStorage.removeItem("token"),n(t)}))}))},login:function(t,e){var r=t.commit;return new Promise((function(t,n){r("auth_request"),Vt()({url:a+"/login",data:e,method:"POST"}).then((function(e){var n=e.data.token;localStorage.setItem("token",n),Vt.a.defaults.headers.common["Authorization"]=n,r("auth_success",e.data),t(e)})).catch((function(t){r("auth_error"),localStorage.removeItem("token"),n(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t,r){e("logout"),localStorage.removeItem("token"),delete Vt.a.defaults.headers.common["Authorization"],t()}))},getTracks:function(t){var e=t.commit;Vt()({url:a+"/getTracks",method:"GET"}).then((function(t){e("setTrackList",t.data)}))}}}),Nt=r("2106"),zt=r.n(Nt);Object(n["e"])(i).use(zt.a,Vt.a).use(Jt).use(Mt).mount("#app")},"62da":function(t,e,r){},"7cbc":function(t,e,r){"use strict";r("90a8")},"90a8":function(t,e,r){},"929c":function(t,e,r){"use strict";r("33ac")},"93bf":function(t,e,r){"use strict";r("e929")},b020:function(t,e,r){"use strict";r("2088")},b93f:function(t,e,r){},c67b:function(t,e,r){"use strict";r("62da")},d740:function(t,e,r){},d8f3:function(t,e,r){},dc4c:function(t,e,r){"use strict";r("283d")},e816:function(t,e,r){},e929:function(t,e,r){}});
//# sourceMappingURL=app.d2a94d9d.js.map